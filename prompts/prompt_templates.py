# prompts/prompt_templates.py

# 1. 专利文本摘要与核心权利要求提取的提示
PATENT_SUMMARY_PROMPT = """
你是一个精通专利分析的AI助手。请阅读以下专利文本，并提供以下信息：
1.  **专利名称**。
2.  **技术领域**。
3.  **核心权利要求**：请提取并列出最重要的权利要求（例如，独立权利要求1）。请保持权利要求的原始表述，但可以进行编号和格式化以便阅读。
4.  **主要技术特点/创新点**：基于整个专利文本，简要总结该专利的主要技术特点和创新点是什么。

专利文本：
```
{patent_text}
```

请按照以下格式输出：
**专利名称**：[在此处填写专利名称]
**技术领域**：[在此处填写技术领域]
**核心权利要求**：
1. [权利要求1的文本]
2. [权利要求2的文本]
...
**主要技术特点/创新点**：
- [特点1]
- [特点2]
...
"""

# 2. 基于专利特征生成搜索关键词的提示 (此部分在项目中提到会使用SerpAPI，LLM可能辅助生成关键词)
SEARCH_KEYWORD_GENERATION_PROMPT = """
你是一个专利检索专家。基于以下专利的核心技术特点和权利要求，请生成5-10个用于在互联网上搜索潜在侵权产品、技术或公司的关键词组合。
关键词应具有多样性，覆盖技术核心、应用场景、可能的替代方案等。

专利信息：
**专利名称**：{patent_name}
**技术领域**：{technical_field}
**核心权利要求**：
{core_claims}
**主要技术特点/创新点**：
{key_features}

生成的搜索关键词组合（每行一个）：
"""

# 3. 侵权分析与证据评估的提示 (针对单个潜在侵权线索)
INFRINGEMENT_ANALYSIS_PROMPT = """
你是一位资深的知识产权律师和技术专家，任务是分析一个潜在的产品/技术（称为“目标产品”）是否可能侵犯一项给定的专利。

**专利信息**：
专利名称：{patent_name}
技术领域：{technical_field}
核心权利要求：
{core_claims}
主要技术特点/创新点：
{key_features}

**目标产品/技术描述**：
{target_product_description}

**分析要求**：
请根据以下方面进行详细分析，并给出结论：

1.  **技术特征对比**：
    *   将被告产品/技术的技术特征与专利的【核心权利要求】中的技术特征逐一进行对比。
    *   明确指出哪些技术特征在目标产品中被字面覆盖（相同或等同）。
    *   明确指出哪些技术特征在目标产品中可能未被覆盖，或者存在显著差异。

2.  **侵权可能性评估**：
    *   **字面侵权可能性**：基于技术特征对比，目标产品落入专利权利要求字面保护范围的可能性有多大（高、中、低）？请说明理由。
    *   **等同侵权可能性**：（如果未构成字面侵权或部分特征不完全一致）目标产品是否可能构成等同侵权？即，采用基本相同的手段，实现基本相同的功能，达到基本相同的效果，并且这种替换对于本领域普通技术人员来说是显而易见的。请评估可能性（高、中、低）并说明理由。

3.  **初步匹配度得分**：
    *   请给出一个整体的技术特征匹配度得分（0-100分）。70分以上可认为是高匹配度。请简要说明打分依据。

4.  **抗辩理由初步考虑** (如果信息充足):
    *   从目标产品描述中，是否能初步看到任何可能的抗辩理由（如现有技术、非商业使用、专利权滥用等）？

5.  **结论与建议**：
    *   综合以上分析，初步判断目标产品侵犯该专利的风险等级（高、中、低）。
    *   如果风险较高，建议收集哪些进一步的证据？

请确保你的分析逻辑清晰，语言专业且客观。

分析报告：
"""


# 4. 生成最终侵权分析报告的总结提示 (汇总多个线索的分析结果)
FINAL_REPORT_GENERATION_PROMPT = """
你是一位资深的知识产权分析师，负责撰写一份专利侵权风险分析报告。
你已经对一项核心专利和多个潜在的侵权线索（目标产品/技术）进行了初步分析。

**核心专利信息**：
专利名称：{patent_name}
技术领域：{technical_field}
核心权利要求：
{core_claims}
主要技术特点/创新点：
{key_features}

**各侵权线索分析摘要**：
{individual_analysis_summaries}
Format for each summary:
### 线索：[线索名称/来源]
匹配度得分：[得分]/100
风险等级：[高/中/低]
简要分析：[几句话总结关键的匹配点和差异点]
证据链接（如有）：[链接]
---

**报告撰写要求**：
请整合以上信息，生成一份结构清晰、内容全面的专利侵权风险分析报告。报告应至少包含以下部分：

1.  **引言**：
    *   简述分析的专利及其重要性。
    *   说明本次分析的目的。

2.  **核心专利概述**：
    *   专利名称、技术领域。
    *   核心权利要求摘要。
    *   主要技术特点和创新点。

3.  **侵权线索评估汇总**：
    *   以表格或列表形式，清晰展示每个被分析线索的：
        *   线索名称/来源
        *   技术特征匹配度得分
        *   侵权风险等级（高/中/低）
        *   关键理由简述
    *   重点突出高风险线索。

4.  **高风险线索详细分析** (选择1-2个风险最高的线索进行更详细的阐述):
    *   针对每个高风险线索，详细说明其技术特征与专利权利要求的对应关系。
    *   解释为什么判定为高风险。

5.  **证据链初步构建** (针对高风险线索):
    *   列出现有的证据（如产品手册链接、技术文档、网页截图描述等）。
    *   建议还需要收集哪些类型的证据来强化侵权指控（例如：销售数据、产品实物、内部技术规格书等）。

6.  **总体结论与建议**：
    *   对该专利面临的整体侵权风险进行总结。
    *   提出后续行动建议（如：进一步法务评估、发送警告函、提起诉讼、商业谈判等）。

请使用专业的法律和技术术语，确保报告的客观性和准确性。
报告应为Markdown格式。

生成的报告：
"""

# 5. 从侵权线索目录中的文件提取文本的通用提示
EXTRACT_TEXT_FROM_FILE_PROMPT = """
你是一个文件内容提取助手。以下是文件 `{filename}` 的内容。
请提取其主要文本信息，忽略格式、元数据等非核心内容，以便后续进行侵权分析。
如果文件内容是代码、日志或结构化数据，请尽量保持其结构。
如果文件内容看起来是乱码或者无法识别的二进制内容，请明确指出。

文件内容：
```
{file_content}
```

提取的文本信息：
"""
